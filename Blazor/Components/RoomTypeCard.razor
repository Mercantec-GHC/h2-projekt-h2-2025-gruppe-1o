@using DomainModels.DTOs
@using System.Globalization

<div class="card h-100 shadow-sm">
    <img src="@ImageHelper.GetRoomImagePath(RoomType.Name)" class="card-img-top" alt="Billede af @RoomType.Name" style="height: 200px; object-fit: cover;">
    <div class="card-body d-flex flex-column">
        <h5 class="card-title">@RoomType.Name</h5>
        <p class="card-text text-muted flex-grow-1">@RoomType.Description</p>
        <p class="card-text">Fra <strong>@RoomType.BasePrice.ToString("C0", _danishCulture)</strong> / nat</p>

        <div class="mt-auto d-grid">
            <button class="btn btn-primary" @onclick="HandleDetailsClick">Udforsk Værelset</button>
        </div>
    </div>
</div>

@code {
    // --- FORKLARING ---
    // Fjernet den lokale `GetImageUrlForRoom`-metode.
    // Anvender nu den centraliserede `ImageHelper.GetRoomImagePath`.
    // ---

    [Parameter, EditorRequired]
    public RoomTypeGetDto RoomType { get; set; } = default!;

    [Parameter]
    public EventCallback<int> OnDetailsClicked { get; set; }

    private readonly CultureInfo _danishCulture = new("da-DK");

    private async Task HandleDetailsClick()
    {
        await OnDetailsClicked.InvokeAsync(RoomType.Id);
    }
}