@using DomainModels.DTOs

<div class="card h-100 shadow-sm">
    <img src="@GetImageUrlForRoom(RoomType.Name)" class="card-img-top" alt="Billede af @RoomType.Name" style="height: 200px; object-fit: cover;">
    <div class="card-body d-flex flex-column">
        <h5 class="card-title">@RoomType.Name</h5>
        <p class="card-text text-muted flex-grow-1">@RoomType.Description</p>
        <p class="card-text">Fra <strong>@RoomType.BasePrice.ToString("C0")</strong> / nat</p>

        <div class="mt-auto d-flex justify-content-between align-items-center">
            <button class="btn btn-link px-0" @onclick="HandleDetailsClick">Se detaljer</button>
            <button class="btn btn-primary" @onclick="HandleBookNowClick">Book Nu</button>
        </div>
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public RoomTypeGetDto RoomType { get; set; }

    // NYT: To separate EventCallbacks for to forskellige handlinger
    [Parameter]
    public EventCallback<int> OnBookNowClicked { get; set; }
    [Parameter]
    public EventCallback<int> OnDetailsClicked { get; set; }

    private async Task HandleBookNowClick()
    {
        await OnBookNowClicked.InvokeAsync(RoomType.Id);
    }

    private async Task HandleDetailsClick()
    {
        await OnDetailsClicked.InvokeAsync(RoomType.Id);
    }

    private string GetImageUrlForRoom(string roomName)
    {
        return roomName switch
        {
            "Standard Værelse" => "/images/room-standard.png",
            "Deluxe Suite" => "/images/room-deluxe.png",
            "Presidential Suite" => "/images/room-presidential.png",
            _ => "/images/room-default.png"
        };
    }
}