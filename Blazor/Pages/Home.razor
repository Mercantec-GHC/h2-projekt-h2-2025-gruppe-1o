@page "/"
@using Blazor.Components
@using DomainModels.DTOs 
@inject NavigationManager Navigation
@inject APIService ApiService

<PageTitle>Velkommen til Flyhigh Hotel</PageTitle>

<div class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <h1 class="hero-title">Velkommen til Flyhigh Hotel</h1>
        <p class="hero-subtitle">Book dit luksusophold over skyerne</p>
    </div>
</div>

<div class="search-section">
    <BookingSearchForm />
</div>

<div class="page-section">
    <h2 class="section-title">Vores Værelsestyper</h2>
    <p class="section-subtitle">Oplev luksus og komfort i vores nøje udvalgte værelser</p>
    
    @if (featuredRooms is null)
    {
        <p><em>Indlæser værelser...</em></p>
    }
    else
    {
        <div class="room-types-grid">
            @foreach (var room in featuredRooms)
            {
                <RoomTypeCard RoomType="room" 
                              OnBookNowClicked="ViewRoomDetails" 
                              OnDetailsClicked="ViewRoomDetails" />
            }
        </div>
    }
</div>

@code {
    private List<RoomTypeGetDto> featuredRooms;

    protected override async Task OnInitializedAsync()
    {
        var allRooms = await ApiService.GetAllRoomTypesAsync();
        featuredRooms = allRooms?.Take(3).ToList();
    }

    private void ViewRoomDetails(int roomTypeId)
    {
        Navigation.NavigateTo($"/room/{roomTypeId}");
    }
}